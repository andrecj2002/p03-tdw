# Nome que queremos dar ao workflow
name: pipeline_TDW-02

# Eventos que irão disparar o workflow
on:
  push:
    branches:
      - main  # Dispara o workflow em pushs para a branch main
  pull_request:
    branches:
      - main  # Dispara o workflow em pull requests para a branch main

# Definição dos jobs que serão executados
jobs:
  build:

    # O job será executado em um runner com Ubuntu
    runs-on: ubuntu-latest

    steps:
    # Passos que serão executados no job
    - name: Checkout code
      uses: actions/checkout@v3  # Faz o checkout do código do repositório

    - name: Set up Node.js
      uses: actions/setup-node@v3  # Configura o Node.js no runner
      with:
        node-version: '18'  # Define a versão do Node.js a ser usada

    - name: Cache Node.js modules
      uses: actions/cache@v3
      with:
        path: ~/.npm
        key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
        restore-keys: |
          ${{ runner.os }}-node-

    - name: Install dependencies
      run: npm install  # Instala as dependências do projeto

    - name: Run tests
      run: npm test  # Executa os testes do projeto

    - name: Build project
      run: npm run build  # Constrói o projeto
